package alg;

import java.awt.Point;
import java.util.ArrayList;

public class Bounty {
	public int value;
	public int index;
	public Bounty next;
	public Point offset;
	
	public Bounty(int value) {
		this.value = value;
	}
	
	public static Bounty getStarter(int[][] pattern, int empty) {
		Bounty starter = null;
		Point lastTile = null;
		Bounty last = null;
		
		for(int i = 0; i < pattern.length; i++) {
			for(int j = 0; j < pattern[i].length; j++) {
				int current = pattern[i][j];
				
				if(current != empty) {
					if(last == null) {
						last = new Bounty(current);
						starter = last;
						lastTile = new Point(i, j);
						continue;
					}
					
					Bounty next = new Bounty(current);
					last.next = next;
					last.offset = new Point(i - lastTile.x, j - lastTile.y);
					last = next;
				}
			}
		}
		
		return starter;
	}
	
	public static Bounty[][] getStarters(int[][][] patterns, int empty, int tiles) {
		ArrayList<Bounty>[] starters = new ArrayList[tiles];
		
		for(int i = 0; i < starters.length; i++) {
			starters[i] = new ArrayList<Bounty>();
		}
		
		for(int[][] pattern : patterns) {
			Bounty bounty = getStarter(pattern, empty);
			starters[bounty.value].add(bounty);
		}
		
		Bounty[][] arr = new Bounty[tiles][];
		
		for(int i = 0; i < starters.length; i++) {
			ArrayList<Bounty> el = starters[i];
			arr[i] = new Bounty[el.size()];
			
			for(int j = 0; j < el.size(); j ++) {
				arr[i][j] = el.get(j);
			}
		}
		
		return arr;
	}
	
	public static Bounty[][] getStarters(int[][] pattern, int empty, int tiles) {
		return getStarters(new int[][][] {pattern}, empty, tiles);
	}
}
